# NeverMiss 项目测试计划

## 测试策略概述

本测试计划涵盖 NeverMiss 应用所有新功能和改进的测试策略。我们将采用以下测试方法:

1. **单元测试**: 针对独立组件和函数的测试
2. **集成测试**: 测试组件间的交互和数据流
3. **UI 测试**: 验证用户界面和交互
4. **用户接受度测试**: 真实用户体验测试
5. **性能测试**: 确保应用在各种条件下的响应性能

## 任务0：数据库版本与应用信息集成测试

### 单元测试
- ✅ 测试 `getAppInfo()` 函数返回正确的应用信息
- ✅ 测试 `getDatabaseVersion()` 函数返回正确的版本数据
- ✅ 测试版本号格式化函数

### 集成测试
- ✅ 测试数据导出功能，确认包含版本信息
- ✅ 测试数据导入功能，验证版本兼容性检查
- ✅ 测试版本不兼容时的错误处理

### 测试场景
1. ✅ 导出数据并检查 JSON 结构中的版本信息
2. ✅ 导入较旧版本的数据，验证迁移是否成功
3. ✅ 导入较新版本的数据，验证警告提示
4. ✅ 多次导入导出，确保数据一致性

## 任务1：农历支持测试

### 单元测试
- 测试农历日期转换函数的准确性
- 测试农历节日识别功能
- 测试闰月处理逻辑

### UI 测试
- 测试农历日期选择器组件的交互
- 测试农历/公历切换的日期转换
- 验证农历日期显示格式

### 测试场景
1. 不同农历日期的选择和转换
2. 闰月日期的处理
3. 农历节日的显示
4. 在任务周期中使用农历日期

## 任务2：增强循环设置功能测试

### 单元测试
- 测试各种循环模式的日期计算逻辑
- 测试大小周的周期确定
- 测试按月日期的边界情况 (如 2 月 29 日)

### UI 测试
- 测试循环设置组件的用户交互
- 测试循环预览功能的准确性
- 验证各种循环选项的视觉指示

### 测试场景
1. 创建并验证大小周循环的任务
2. 创建每月固定日期的任务 (包括 31 日在小月的处理)
3. 创建每年固定天数的任务 (包括闰年处理)
4. 创建每周固定星期几的任务
5. 结合农历日期使用各种循环模式

## 任务3：任务周期管理测试

### 单元测试
- 测试完成任务后新周期生成逻辑
- 测试逾期任务新周期生成逻辑
- 测试统计记录生成功能

### 集成测试
- 测试任务完成流程的完整性
- 测试统计数据的准确性
- 测试不同状态下任务的周期连续性

### 测试场景
1. 完成任务，验证下一周期是否正确生成
2. 让任务逾期，验证新周期生成和统计记录
3. 多次完成任务，验证统计数据累计
4. 测试不同循环模式下的周期生成

## 任务5：任务标签和背景测试

### 单元测试
- 测试标签的 CRUD 操作
- 测试标签颜色处理
- 测试背景设置的存储

### UI 测试
- 测试标签管理界面的交互
- 测试标签在任务列表中的显示
- 测试不同背景设置的视觉效果

### 测试场景
1. 创建、编辑和删除标签
2. 为任务添加多个标签
3. 更改列表背景，检查标签和任务的可见性
4. 导出带标签的任务，验证标签信息保存完好

## 任务6：任务列表增强测试

### 单元测试
- 测试排序算法的正确性
- 测试筛选功能的逻辑
- 测试搜索功能的匹配算法

### UI 测试
- 测试排序控件的交互
- 测试筛选面板的操作流程
- 测试搜索框的实时响应

### 性能测试
- 测试大量任务数据下的排序性能
- 测试复杂筛选条件的响应时间
- 测试搜索功能在不同数据量下的性能

### 测试场景
1. 使用不同排序选项对任务列表排序
2. 应用多种筛选条件组合
3. 使用关键词和高级搜索语法搜索任务
4. 在不同视图模式间切换，验证数据一致性

## 任务7：通知改进测试

### 单元测试
- 测试日边界计算函数
- 测试通知触发逻辑
- 测试任务完成记录生成

### 集成测试
- 测试前台服务的启动和持续运行
- 测试通知分组功能
- 测试通知交互响应

### 测试场景
1. 设置定时任务，验证通知在正确时间触发
2. 测试跨日边界时间点 (如早上 5:59 到 6:01) 的通知行为
3. 测试设备重启后通知的恢复
4. 测试从通知直接完成任务的功能
5. 验证每日任务概览通知的内容准确性

## 任务8：代码重组测试

### 单元测试
- 测试重构后的关键功能模块
- 验证组件接口的一致性
- 测试路径别名导入

### 集成测试
- 测试模块间的交互
- 验证数据流在新结构中的完整性

### 测试场景
1. 执行所有现有功能的回归测试
2. 验证应用在不同设备上的性能未受影响
3. 检查控制台是否有导入错误或警告

## 任务9：UI 改进和自动化构建测试

### UI 测试
- 测试新图标在不同设备和系统上的显示
- 测试启动屏幕的加载体验
- 测试深色/浅色模式下的外观

### 集成测试
- 测试 GitHub Actions 工作流
- 验证自动构建的产物
- 测试版本更新检查功能

### 测试场景
1. 在不同尺寸和分辨率的设备上验证新 UI 资源
2. 触发 GitHub Actions 工作流，验证构建过程
3. 测试版本更新提示功能
4. 验证发布的版本号和更新日志的自动生成

## 测试环境

### 设备矩阵
- Android 手机 (不同尺寸和 Android 版本)
- iOS 设备 (iPhone 和 iPad，不同 iOS 版本)
- 平板设备

### 工具
- Jest 用于单元测试
- Detox 用于 E2E 测试
- 自定义性能监控工具

## 测试报告模板

每个测试完成后，需填写以下报告：

```
# 测试报告：[任务名称]

## 测试概述
- 测试日期：
- 测试版本：
- 测试环境：

## 测试结果
- 通过项：
- 失败项：
- 阻塞项：

## 发现的问题
1. [问题描述]
   - 严重程度：
   - 复现步骤：
   - 预期行为：
   - 实际行为：

## 性能指标
- 启动时间：
- 内存使用：
- 响应时间：

## 结论和建议
```

## 测试进度跟踪

| 任务 | 单元测试 | 集成测试 | UI测试 | 性能测试 | 总体状态 |
|-----|---------|---------|-------|---------|---------|
| 任务0 | 已完成 | 已完成 | N/A | N/A | 已完成 |
| 任务1 | 未开始 | 未开始 | 未开始 | N/A | 未开始 |
| 任务2 | 未开始 | 未开始 | 未开始 | N/A | 未开始 |
| 任务3 | 未开始 | 未开始 | 未开始 | N/A | 未开始 |
| 任务5 | 未开始 | 未开始 | 未开始 | N/A | 未开始 |
| 任务6 | 未开始 | 未开始 | 未开始 | 未开始 | 未开始 |
| 任务7 | 未开始 | 未开始 | 未开始 | N/A | 未开始 |
| 任务8 | 未开始 | 未开始 | N/A | 未开始 | 未开始 |
| 任务9 | N/A | 未开始 | 未开始 | N/A | 未开始 |

## 测试责任分配
- 单元测试：开发团队
- 集成测试：开发团队
- UI测试：UI/UX团队
- 性能测试：开发团队
- 用户测试：产品团队

## 最新测试报告

### 任务0：数据库版本与应用信息集成测试报告

#### 测试概述
- 测试日期：2024-07-04
- 测试版本：1.0.0
- 测试环境：多种Android和iOS设备

#### 测试结果
- 通过项：12/12
- 失败项：0
- 阻塞项：0

#### 发现的问题
无严重问题。一个小的UI显示问题已修复。

#### 结论和建议
任务0测试全部通过，功能已稳定可靠。建议可以发布至生产环境。

### 任务1：农历支持测试计划（进行中）

#### 测试范围
- LunarDatePicker组件
- 农历日期转换函数
- 农历循环设置
- 农历任务展示

#### 测试重点
- 确保农历日期选择器的易用性
- 验证农历和公历日期转换的准确性
- 测试闰月处理的正确性
- 验证农历任务的到期通知是否准确 