# NeverMiss 安装和故障排除指南

## 安装步骤

1. 克隆仓库:
```bash
git clone https://github.com/yourusername/nevermiss.git
cd nevermiss
```

2. 安装依赖:
```bash
npm install
```

3. 启动开发服务器:
```bash
npm start
```

4. 在设备上运行:
- Android:
  ```bash
  npm run android
  ```
- iOS:
  ```bash
  npm run ios
  ```

## 常见问题解决方案

### Android 构建问题

#### Gradle 构建失败

如果遇到 Gradle 构建失败，请尝试以下步骤：

1. 清理 Gradle 缓存:
```bash
cd android
./gradlew clean
cd ..
```

2. 重新安装依赖:
```bash
npm install
```

3. 使用清除缓存方式启动:
```bash
npm run clean
```

#### SDK 路径问题

如果遇到 SDK 路径问题，请创建或编辑 `android/local.properties` 文件:
```properties
sdk.dir=C\:\\Users\\YourUsername\\AppData\\Local\\Android\\Sdk
```

请将 `YourUsername` 替换为您的实际用户名。

#### 版本不兼容问题

确保 React Native 版本与 Expo SDK 兼容:
```bash
# 更新到兼容版本
npx expo install expo@^52.0.0 --fix
```

### iOS 构建问题

#### Pod 安装失败

如果 Pod 安装失败，请尝试:
```bash
cd ios
pod install --repo-update
cd ..
```

#### 模拟器启动问题

如果模拟器启动有问题，请尝试:
```bash
# 重置模拟器
npx expo start --ios --clear
```

### 数据存储问题

#### 数据存储错误

如果遇到数据存储错误，请尝试重置数据:
- 在应用中使用设置菜单中的"重置数据库"选项
- 或重新安装应用

#### 数据迁移问题

如果遇到数据迁移问题:
- 检查 `services/database.ts` 中的数据库版本号
- 确保迁移脚本正确执行

### 依赖问题

#### AsyncStorage 相关错误

如果遇到 AsyncStorage 相关错误，请确保正确安装了依赖:
```bash
npx expo install @react-native-async-storage/async-storage
```

## 更新依赖

如果需要更新所有依赖到最新版本:
```bash
npx expo install --fix
```

## 构建生产版本

### Android APK

构建 Android APK:
```bash
npx expo build:android -t apk
```

### iOS IPA

构建 iOS IPA (需要 Apple 开发者账号):
```bash
npx expo build:ios -t archive
```

## 环境配置

### Android 环境变量

确保设置了正确的 Android 环境变量:
```bash
# Windows
set ANDROID_HOME=C:\Users\YourUsername\AppData\Local\Android\Sdk
set PATH=%PATH%;%ANDROID_HOME%\tools;%ANDROID_HOME%\platform-tools

# macOS/Linux
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools
```

### iOS 环境要求

- macOS 操作系统
- 最新版本的 Xcode
- CocoaPods (`sudo gem install cocoapods`)

## 性能优化

如果应用性能不佳，请尝试:
1. 启用 Hermes JavaScript 引擎
2. 使用生产模式构建
3. 减少不必要的重新渲染
4. 优化图片资源

## 联系支持

如有任何问题，请联系:
- 电子邮件: support@nevermiss.com
- GitHub Issues: https://github.com/yourusername/nevermiss/issues 