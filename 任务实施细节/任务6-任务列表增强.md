# 任务6：任务列表增强

## 需求描述
添加任务列表排序、筛选和搜索功能，提高用户的任务管理效率。用户可以根据不同条件对任务列表进行组织和查找。

## 技术分析
目前的任务列表功能较为基础，没有提供高级的排序和筛选能力。需要在现有的 `TaskList.tsx` 基础上添加这些功能，并设计直观的用户界面来控制这些选项。

## 实施计划

### 1. 设计任务排序功能
- 创建 `components/widgets/TaskSortControl.tsx` 组件
- 实现以下排序选项：
  - 按开始日期排序
  - 按截止日期排序
  - 按创建日期排序
  - 按任务名称排序
  - 按完成状态排序
  - 按标签排序（如果已实现标签功能）
- 添加升序/降序切换选项
- 实现排序逻辑的分离，便于重用和测试

### 2. 设计任务筛选功能
- 创建 `components/widgets/TaskFilterControl.tsx` 组件
- 实现以下筛选选项：
  - 按状态筛选（活跃、完成、逾期）
  - 按日期范围筛选
  - 按标签筛选
  - 按循环类型筛选
  - 按提醒设置筛选
- 支持多条件复合筛选
- 添加保存常用筛选器的功能

### 3. 实现任务搜索功能
- 创建 `components/widgets/TaskSearchBar.tsx` 组件
- 实现实时搜索功能
- 支持以下搜索范围：
  - 任务标题
  - 任务描述
  - 标签名称
- 提供搜索历史和快速建议
- 支持高级搜索语法（例如使用引号搜索精确短语）

### 4. 更新任务列表页面布局
- 重新设计 `app/index.tsx` 或 `app/tasks.tsx` 页面
- 添加排序、筛选、搜索控件区域
- 实现控件的折叠/展开功能，节省空间
- 优化移动设备上的用户体验

### 5. 优化任务数据处理
- 重构任务数据获取逻辑，支持服务器端排序和筛选
- 为大量任务实现分页加载
- 优化搜索性能，避免UI卡顿
- 实现数据缓存，减少重复查询

### 6. 添加视图切换功能
- 创建 `components/widgets/TaskViewSelector.tsx` 组件
- 实现以下视图模式：
  - 列表视图（默认）
  - 卡片视图
  - 日历视图
  - 看板视图
- 保存用户视图偏好

### 7. 实现数据持久化
- 更新存储服务，保存用户的排序、筛选和视图偏好
- 在应用启动时恢复用户的上次设置
- 实现设置的导入/导出功能

## 相关文件
- `components/TaskList.tsx` - 现有任务列表组件
- 待创建: `components/widgets/TaskSortControl.tsx` - 排序控件
- 待创建: `components/widgets/TaskFilterControl.tsx` - 筛选控件
- 待创建: `components/widgets/TaskSearchBar.tsx` - 搜索栏组件
- 待创建: `components/widgets/TaskViewSelector.tsx` - 视图选择器
- `app/index.tsx` 或 `app/tasks.tsx` - 主任务列表页面
- `services/taskService.ts` - 任务服务，需添加排序和筛选功能

## 注意事项
- 优化性能，确保在任务数量大时依然流畅
- 设计直观的用户界面，减少用户学习成本
- 考虑筛选和排序组合的复杂情况
- 提供合理的默认排序和筛选选项
- 确保搜索功能易于访问且响应迅速
- 实现本地化，支持多语言的排序和筛选选项
- 视图切换功能要考虑数据一致性，避免切换视图导致用户迷失 